<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Accounting Interview 3D</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Three.js -->
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/loaders/GLTFLoader.js"></script>

<style>
body {
    margin: 0;
    font-family: Tahoma, Arial;
    background: radial-gradient(#111, #000);
    color: #fff;
}

/* Ø§Ù„Ù…Ø´Ù‡Ø¯ */
.container {
    max-width: 1000px;
    margin: auto;
}

/* 3D */
#threeScene {
    width: 100%;
    height: 380px;
    background: #1a1a1a;
}

/* Ø§Ù„Ù…ÙƒØªØ¨ */
.desk {
    height: 60px;
    background: linear-gradient(#6d4c41, #4e342e);
}

/* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
.content {
    padding: 20px;
    background: #111;
}

.question {
    font-size: 20px;
    margin-bottom: 15px;
    min-height: 60px;
    border-right: 4px solid #00e5ff;
    padding-right: 10px;
}

/* Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
textarea {
    width: 100%;
    height: 90px;
    font-size: 16px;
    padding: 10px;
    border-radius: 8px;
    border: none;
    outline: none;
}

/* Ø£Ø²Ø±Ø§Ø± */
.buttons {
    margin-top: 15px;
    display: flex;
    gap: 10px;
}
button {
    flex: 1;
    padding: 12px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
}
.read { background: #0288d1; color: #fff; }
.voice { background: #2e7d32; color: #fff; }
.next { background: #6a1b9a; color: #fff; }
</style>
</head>

<body>

<div class="container">

    <!-- Ø´Ø®ØµÙŠØ© 3D -->
    <div id="threeScene"></div>

    <!-- Ø§Ù„Ù…ÙƒØªØ¨ -->
    <div class="desk"></div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    <div class="content">
        <div class="question" id="question"></div>

        <textarea id="answer" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØªÙŠ..."></textarea>

        <div class="buttons">
            <button class="read" onclick="playVoice()">ğŸ”Š Ø§Ø³ØªÙ…Ø¹ Ù„Ù„Ø³Ø¤Ø§Ù„</button>
            <button class="voice" onclick="startVoice()">ğŸ¤ Ø¥Ø¬Ø§Ø¨Ø© ØµÙˆØªÙŠØ©</button>
            <button class="next" onclick="nextQuestion()">â¡ï¸ Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>
    </div>

</div>

<audio id="voice"></audio>

<script>
/* ================== Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ================== */
const questions = [
 "Ø¹Ø±Ù Ù†ÙØ³Ùƒ ÙÙŠ Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©.",
 "ÙƒÙŠÙ ØªØªØµØ±Ù ØªØ­Øª Ø¶ØºØ· Ø§Ù„Ø¹Ù…Ù„ØŸ",
 "Ù…Ø§ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ù…ØµØ±ÙˆÙ Ø§Ù„Ø±Ø£Ø³Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ø¥ÙŠØ±Ø§Ø¯ÙŠØŸ",
 "Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙˆØ§Ø²Ù† Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©ØŒ Ù…Ø§Ø°Ø§ ØªÙØ¹Ù„ØŸ",
 "Ù…Ø§ ØªÙ‚ÙŠÙŠÙ…Ùƒ Ù„Ø°ÙƒØ§Ø¦Ùƒ Ø§Ù„Ù…Ø§Ù„ÙŠØŸ"
];

let index = 0;
const qBox = document.getElementById("question");
const aBox = document.getElementById("answer");
showQuestion();

/* ================== Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ ================== */
function showQuestion() {
    qBox.textContent = questions[index];
    playVoice();
}

/* ================== ØµÙˆØª Ø§Ø­ØªØ±Ø§ÙÙŠ ================== */
function playVoice() {
    const audio = document.getElementById("voice");
    audio.src = "audio/q" + (index + 1) + ".mp3";
    audio.play();
}

/* ================== ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª Ù„Ù†Øµ ================== */
function startVoice() {
    if (!('webkitSpeechRecognition' in window)) {
        alert("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØªÙŠ");
        return;
    }
    const rec = new webkitSpeechRecognition();
    rec.lang = "ar-EG";
    rec.start();
    rec.onresult = e => aBox.value += e.results[0][0].transcript;
}

/* ================== Ø§Ù„ØªØ§Ù„ÙŠ ================== */
function nextQuestion() {
    index++;
    if (index >= questions.length) {
        alert("Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¥Ù†ØªØ±ÙÙŠÙˆ âœ…");
        index = 0;
    }
    aBox.value = "";
    showQuestion();
}

/* ================== 3D SCENE ================== */
let scene = new THREE.Scene();
scene.background = new THREE.Color(0x111111);

let camera = new THREE.PerspectiveCamera(45, window.innerWidth / 380, 0.1, 100);
camera.position.set(0, 1.6, 2.8);

let renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, 380);
document.getElementById("threeScene").appendChild(renderer.domElement);

/* Ø¥Ø¶Ø§Ø¡Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© */
scene.add(new THREE.AmbientLight(0xffffff, 0.6));
let light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(2, 5, 5);
scene.add(light);

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ */
let loader = new THREE.GLTFLoader();
loader.load("accountant.glb", gltf => {
    let model = gltf.scene;
    model.scale.set(1.4, 1.4, 1.4);
    model.position.y = -1;
    scene.add(model);

    function animate() {
        model.rotation.y += 0.0015; // Ø­Ø±ÙƒØ© Ø®ÙÙŠÙØ© ÙˆØ§Ù‚Ø¹ÙŠØ©
        renderer.render(scene, camera);
        requestAnimationFrame(animate);
    }
    animate();
});
</script>

</body>
</html>
